# manikyr
Automate batch thumbnailing in picshur. 

Here's an ugly graph of the functionality:

```
             Event has a type and a path ($NAME)                                                                     
             ===================================                                                                     
                                                                              +-----------------------------+        
 +------------------------+                                  +--------------> |Create thumbnail of ./{1}/{2}|        
 |      Watch $NAME       | <-------------------+ Yes        |                |to ./{1}/.thumbs/{2}         |        
 +------------------------+                        +         |                +-----------------------------+-------+
 |            +------------------------+           |         |                        ^                             |
 | +--------> |Is event of type CREATE?|           |  +------+--------+               +                             |
 | |          +------------+-----------+           |  | Mkdir         | <-+ No       Yes                            |
 | |          |            |                       |  | ./{1}/.thumbs |     +         +                             |
 | |          +            +                       |  +---------------+     |         |                             |
 | |         No           Yes        +-------------+---------------+     +--+---------+--------+                    |
 | |          +            +         |Is $NAME a directory and does|     |Is there a directory | <--+ Yes           |
 | |          |            +-------> |it match pattern ./{1}?      |     |./{1}/.thumbs?       |       +            |
 | |          |                      +---------------------------+-+     +---------------------+       |            |
 | | +--------v-----------+          +-----------------------+   |       +-----------------------------+---+        |
 | | |Does $NAME match    +-+ Yes +> |Does $NAME still exist?|   +       |Is $NAME a regular file and does |        |
 | | |pattern ./{1}/{2}?  |          +-----------+-------+---+   No +--> |it match pattern ./{1}/{2}?      |        |
 | | +--------------------+-+ No                 |       |               +-------------------+-------------+        |
 | |                          +                  +       +     +--------------------+        |                      |
 | | +-------------+          |                 Yes     No +-> | Is there a file    |        |                      |
 | +-|Get new event| <-------<+                  +             | ./{1}/.thumbs/{2}? |        |                      |
 |   +-------------+          |                  |             +------------------+-+        |                      |
 |        ^ ^  ^              +-----------------<+----+ No +---+                  |          +                      |
 |        | |  |                                                                  |         No                      |
 +--------+ |  |                                +--------------------+            +          +                      |
            |  |                                | Remove             | <--------+ Yes        |                      |
            |  +---------------------------<+---+ ./{1}/.thumbs/{2}  |                       |                      |
            |                               |   +--------------------+                       |                      |
  +---------+---------+                     |                                                |                      |
  | Watch ./ and ./*  |  START HERE         +-----------------------------------------------<+----------------------+
  +-------------------+                                                                                              
```
